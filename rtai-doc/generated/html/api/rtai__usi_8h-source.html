<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: rtai-core/include/rtai_usi.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>rtai-core/include/rtai_usi.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * Copyright (C) 1999-2003 Paolo Mantegazza &lt;mantegazza@aero.polimi.it&gt;</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
00005 <span class="comment"> * modify it under the terms of the GNU General Public License as</span>
00006 <span class="comment"> * published by the Free Software Foundation; either version 2 of the</span>
00007 <span class="comment"> * License, or (at your option) any later version.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00010 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00012 <span class="comment"> * GNU General Public License for more details.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00015 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00016 <span class="comment"> * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
00017 <span class="comment"> */</span>
00018 
00019 <span class="preprocessor">#ifndef _RTAI_USI_H</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define _RTAI_USI_H</span>
00021 <span class="preprocessor"></span>
00022 <span class="preprocessor">#include &lt;rtai_types.h&gt;</span>
00023 
00024 <span class="preprocessor">#define  FUN_USI_LXRT_INDX 3</span>
00025 <span class="preprocessor"></span>
00026 <span class="preprocessor">#define USI_SEM      0</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define USI_TASKLET  1</span>
00028 <span class="preprocessor"></span>
00029 <span class="preprocessor">#define _REQ_GLB_IRQ             0</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define _FREE_GLB_IRQ            1</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define _STARTUP_IRQ             2</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define _SHUTDOWN_IRQ            3</span>
00033 <span class="preprocessor"></span><span class="preprocessor">#define _ENABLE_IRQ              4</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define _DISABLE_IRQ             5</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define _MASK_AND_ACK_IRQ        6</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#define _ACK_IRQ                 7</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#define _UNMASK_IRQ              8</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define _PEND_LINUX_IRQ          9</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define _INIT_SPIN_LOCK         10</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK              11</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK            12</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK_IRQ          13</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK_IRQ        14</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_LOCK_IRQSV        15</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define _SPIN_UNLOCK_IRQRST     16</span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_CLI                17</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_STI                18</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_SVFLAGS_CLI        19</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_SVFLAGS            20</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define _GLB_RSTFLAGS           21</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define _CLI                    22</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define _STI                    23</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#define _SVFLAGS_CLI            24</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define _SVFLAGS                25</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#define _RSTFLAGS               26</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#define _WAIT_INTR              27</span>
00057 <span class="preprocessor"></span><span class="preprocessor">#define _WAIT_INTR_IF           28</span>
00058 <span class="preprocessor"></span><span class="preprocessor">#define _WAIT_INTR_UNTIL        29</span>
00059 <span class="preprocessor"></span><span class="preprocessor">#define _WAIT_INTR_TIMED        30</span>
00060 <span class="preprocessor"></span>
00061 <span class="preprocessor">#ifdef __KERNEL__</span>
00062 <span class="preprocessor"></span>
00063 <span class="preprocessor">#ifdef __cplusplus</span>
00064 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00065 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00066 
00067 <span class="keywordtype">int</span> __rtai_usi_init(<span class="keywordtype">void</span>);
00068 
00069 <span class="keywordtype">void</span> __rtai_usi_exit(<span class="keywordtype">void</span>);
00070 
00071 <span class="preprocessor">#ifdef __cplusplus</span>
00072 <span class="preprocessor"></span>}
00073 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00074 
00075 <span class="preprocessor">#else </span><span class="comment">/* !__KERNEL__ */</span>
00076 
00077 <span class="preprocessor">#include &lt;<a class="code" href="rtai__lxrt_8h.html">rtai_lxrt.h</a>&gt;</span>
00078 
00079 <span class="preprocessor">#ifdef __cplusplus</span>
00080 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00081 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00082 
00083 RTAI_PROTO(<span class="keywordtype">int</span>, rt_expand_handler_data,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data, <span class="keywordtype">int</span> *irq))
00084 {
00085         *irq = data &amp; 0xFFFF;
00086         <span class="keywordflow">return</span> (data &amp; 0xFFFF0000) &gt;&gt; 16;
00087 }
00088 
00089 RTAI_PROTO(<span class="keywordtype">int</span>, rt_request_global_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq, <span class="keywordtype">void</span> *hook, <span class="keywordtype">int</span> hooktype))
00090 {
00091         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; <span class="keywordtype">void</span> *hook; <span class="keywordtype">int</span> hooktype; } arg = { irq, hook, hooktype };
00092         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _REQ_GLB_IRQ, &amp;arg).i[LOW];
00093 }
00094  
00095 RTAI_PROTO(<span class="keywordtype">int</span>, rt_free_global_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00096 {
00097         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00098         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _FREE_GLB_IRQ, &amp;arg).i[LOW];
00099 }
00100  
00101 RTAI_PROTO(<span class="keywordtype">int</span>, rt_startup_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00102 {
00103         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00104         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _STARTUP_IRQ, &amp;arg).i[LOW];
00105 }
00106  
00107 RTAI_PROTO(<span class="keywordtype">void</span>, rt_shutdown_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00108 {
00109         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00110         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SHUTDOWN_IRQ, &amp;arg);
00111 }
00112  
00113 RTAI_PROTO(<span class="keywordtype">void</span>, rt_enable_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00114 {
00115         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00116         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _ENABLE_IRQ, &amp;arg);
00117 }
00118  
00119 RTAI_PROTO(<span class="keywordtype">void</span>, rt_disable_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00120 {
00121         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00122         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _DISABLE_IRQ, &amp;arg);
00123 }
00124  
00125 RTAI_PROTO(<span class="keywordtype">void</span>, rt_mask_and_ack_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00126 {
00127         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00128         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _MASK_AND_ACK_IRQ, &amp;arg);
00129 }
00130  
00131 RTAI_PROTO(<span class="keywordtype">void</span>, rt_ack_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00132 {
00133         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00134         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _ACK_IRQ, &amp;arg);
00135 }
00136  
00137 RTAI_PROTO(<span class="keywordtype">void</span>, rt_unmask_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00138 {
00139         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00140         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _UNMASK_IRQ, &amp;arg);
00141 }
00142  
00143 RTAI_PROTO(<span class="keywordtype">void</span>, rt_pend_linux_irq,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq))
00144 {
00145         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> irq; } arg = { irq };
00146         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _PEND_LINUX_IRQ, &amp;arg);
00147 }
00148  
00149 RTAI_PROTO(<span class="keywordtype">void</span> *, rt_spin_lock_init,(<span class="keywordtype">void</span>))
00150 {
00151         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00152         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _INIT_SPIN_LOCK, &amp;arg).v[LOW];
00153 }
00154  
00155 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_lock,(<span class="keywordtype">void</span> *lock))
00156 {
00157         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00158         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK, &amp;arg);
00159 }
00160  
00161 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock,(<span class="keywordtype">void</span> *lock))
00162 {
00163         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00164         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK, &amp;arg);
00165 }
00166  
00167 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_lock_irq,(<span class="keywordtype">void</span> *lock))
00168 {
00169         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00170         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK_IRQ, &amp;arg);
00171 }
00172  
00173 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock_irq,(<span class="keywordtype">void</span> *lock))
00174 {
00175         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00176         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK_IRQ, &amp;arg);
00177 }
00178  
00179 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_spin_lock_irqsave,(<span class="keywordtype">void</span> *lock))
00180 {
00181         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *lock; } arg = { lock };
00182         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_LOCK_IRQSV, &amp;arg).i[LOW];
00183 }
00184  
00185 RTAI_PROTO(<span class="keywordtype">void</span>, rt_spin_unlock_irqrestore,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags, <span class="keywordtype">void</span> *lock))
00186 {
00187         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; <span class="keywordtype">void</span> *lock; } arg = { flags, lock };
00188         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SPIN_UNLOCK_IRQRST, &amp;arg);
00189 }
00190  
00191 
00192 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_cli,(<span class="keywordtype">void</span>))
00193 {
00194         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00195         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_CLI, &amp;arg);
00196 }
00197 
00198 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_sti,(<span class="keywordtype">void</span>))
00199 {
00200         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00201         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_STI, &amp;arg);
00202 }
00203 
00204 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_global_save_flags_and_cli,(<span class="keywordtype">void</span>))
00205 {
00206         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00207         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_SVFLAGS_CLI, &amp;arg).i[LOW];
00208 }
00209  
00210 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, rt_global_save_flags,(<span class="keywordtype">void</span>))
00211 {
00212         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00213         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_SVFLAGS, &amp;arg).i[LOW];
00214 }
00215  
00216 RTAI_PROTO(<span class="keywordtype">void</span>, rt_global_restore_flags,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags))
00217 {
00218         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; } arg = { flags };
00219         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _GLB_RSTFLAGS, &amp;arg);
00220 }
00221 
00222 RTAI_PROTO(<span class="keywordtype">void</span>, hard_cli,(<span class="keywordtype">void</span>))
00223 {
00224         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00225         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _CLI, &amp;arg);
00226 }
00227 
00228 RTAI_PROTO(<span class="keywordtype">void</span>, hard_sti,(<span class="keywordtype">void</span>))
00229 {
00230         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00231         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _STI, &amp;arg);
00232 }
00233 
00234 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, hard_save_flags_and_cli,(<span class="keywordtype">void</span>))
00235 {
00236         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00237         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SVFLAGS_CLI, &amp;arg).i[LOW];
00238 }
00239  
00240 RTAI_PROTO(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, hard_save_flags,(<span class="keywordtype">void</span>))
00241 {
00242         <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00243         <span class="keywordflow">return</span> rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _SVFLAGS, &amp;arg).i[LOW];
00244 }
00245  
00246 RTAI_PROTO(<span class="keywordtype">void</span>, hard_restore_flags,(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags))
00247 {
00248         <span class="keyword">struct </span>{ <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> flags; } arg = { flags };
00249         rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _RSTFLAGS, &amp;arg);
00250 }
00251 
00252 RTAI_PROTO(<span class="keywordtype">int</span>, rt_wait_intr,(<span class="keywordtype">void</span> *sem, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *irq))
00253 {
00254         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lirq;
00255         <span class="keywordtype">int</span> retval;
00256         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *sem; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *lirq; <span class="keywordtype">int</span> size; } arg = { sem, &amp;lirq, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *) };
00257         retval = rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _WAIT_INTR, &amp;arg).i[LOW];
00258         <span class="keywordflow">if</span> (irq) {
00259                 *irq = lirq;
00260         }
00261         <span class="keywordflow">return</span> retval;
00262 }                                                                               
00263 
00264 RTAI_PROTO(<span class="keywordtype">int</span>, rt_wait_intr_if,(<span class="keywordtype">void</span> *sem, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *irq))
00265 {
00266         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lirq;
00267         <span class="keywordtype">int</span> retval;
00268         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *sem; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *lirq; <span class="keywordtype">int</span> size; } arg = { sem, &amp;lirq, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *) };
00269         retval = rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _WAIT_INTR_IF, &amp;arg).i[LOW];
00270         <span class="keywordflow">if</span> (irq) {
00271                 *irq = lirq;
00272         }
00273         <span class="keywordflow">return</span> retval;
00274 }                                                                               
00275 
00276 RTAI_PROTO(<span class="keywordtype">int</span>, rt_wait_intr_until,(<span class="keywordtype">void</span> *sem, RTIME until, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *irq))
00277 {
00278         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lirq;
00279         <span class="keywordtype">int</span> retval;
00280         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *sem; RTIME until; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *lirq; <span class="keywordtype">int</span> size; } arg = { sem, until, &amp;lirq, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *) };
00281         retval = rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _WAIT_INTR_UNTIL, &amp;arg).i[LOW];
00282         <span class="keywordflow">if</span> (irq) {
00283                 *irq = lirq;
00284         }
00285         <span class="keywordflow">return</span> retval;
00286 }                                                                               
00287 
00288 RTAI_PROTO(<span class="keywordtype">int</span>, rt_wait_intr_timed,(<span class="keywordtype">void</span> *sem, RTIME delay, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *irq))
00289 {
00290         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lirq;
00291         <span class="keywordtype">int</span> retval;
00292         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *sem; RTIME delay; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *lirq; <span class="keywordtype">int</span> size; } arg = { sem, delay, &amp;lirq, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *) };
00293         retval = rtai_lxrt(FUN_USI_LXRT_INDX, SIZARG, _WAIT_INTR_TIMED, &amp;arg).i[LOW];
00294         <span class="keywordflow">if</span> (irq) {
00295                 *irq = lirq;
00296         }
00297         <span class="keywordflow">return</span> retval;
00298 }                                                                               
00299 
00300 <span class="preprocessor">#ifdef __cplusplus</span>
00301 <span class="preprocessor"></span>}
00302 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00303 
00304 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
00305 
00306 <span class="preprocessor">#endif </span><span class="comment">/* !_RTAI_USI_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jul 24 19:36:04 2004 for RTAI API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
