<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTAI API: rtai-core/include/rtai_tasklets.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>rtai-core/include/rtai_tasklets.h</h1><a href="rtai__tasklets_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00026 <span class="preprocessor">#ifndef _RTAI_TASKLETS_H</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _RTAI_TASKLETS_H</span>
00028 <span class="preprocessor"></span>
00033 <span class="preprocessor">#include &lt;rtai_types.h&gt;</span>
00034 
00035 <span class="preprocessor">#define TSKIDX  1</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#define INIT             0</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define DELETE           1</span>
00039 <span class="preprocessor"></span><span class="preprocessor">#define TASK_INSERT      2</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#define TASK_REMOVE      3</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define USE_FPU          4</span>
00042 <span class="preprocessor"></span><span class="preprocessor">#define TIMER_INSERT     5</span>
00043 <span class="preprocessor"></span><span class="preprocessor">#define TIMER_REMOVE     6</span>
00044 <span class="preprocessor"></span><span class="preprocessor">#define SET_TASKLETS_PRI 7</span>
00045 <span class="preprocessor"></span><span class="preprocessor">#define SET_FIR_TIM      8      </span>
00046 <span class="preprocessor"></span><span class="preprocessor">#define SET_PER          9</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#define SET_HDL         10</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#define SET_DAT         11</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#define EXEC_TASKLET    12</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#define WAIT_IS_HARD    13</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#define SET_TSK_PRI     14</span>
00052 <span class="preprocessor"></span><span class="preprocessor">#define REG_TASK        15</span>
00053 <span class="preprocessor"></span>
00054 <span class="keyword">struct </span>rt_task_struct;
00055 
00056 <span class="keyword">struct </span>rt_tasklet_struct {
00057 
00058     <span class="keyword">struct </span>rt_tasklet_struct *next, *prev;
00059     <span class="keywordtype">int</span> priority, uses_fpu;
00060     RTIME firing_time, period;
00061     void (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);
00062     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data, id;
00063     <span class="keywordtype">int</span> thread;
00064     <span class="keyword">struct </span>rt_task_struct *task;
00065     <span class="keyword">struct </span>rt_tasklet_struct *usptasklet;
00066 };
00067 
00068 <span class="preprocessor">#ifdef __KERNEL__</span>
00069 <span class="preprocessor"></span>
00070 <span class="preprocessor">#ifdef CONFIG_RTAI_TASKLETS_BUILTIN</span>
00071 <span class="preprocessor"></span><span class="preprocessor">#define TASKLETS_INIT_MODULE     tasklets_init_module</span>
00072 <span class="preprocessor"></span><span class="preprocessor">#define TASKLETS_CLEANUP_MODULE  tasklets_cleanup_module</span>
00073 <span class="preprocessor"></span><span class="preprocessor">#else  </span><span class="comment">/* !CONFIG_RTAI_TASKLETS_BUILTIN */</span>
00074 <span class="preprocessor">#define TASKLETS_INIT_MODULE     init_module</span>
00075 <span class="preprocessor"></span><span class="preprocessor">#define TASKLETS_CLEANUP_MODULE  cleanup_module</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* CONFIG_RTAI_TASKLETS_BUILTIN */</span>
00077 
00078 <span class="preprocessor">#define STACK_SIZE 8196</span>
00079 <span class="preprocessor"></span>
00080 <span class="preprocessor">#ifdef __cplusplus</span>
00081 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00082 <span class="preprocessor">#endif </span><span class="comment">/* !__cplusplus */</span>
00083 
00084 <span class="keywordtype">int</span> TASKLETS_INIT_MODULE(<span class="keywordtype">void</span>);
00085 
00086 <span class="keywordtype">void</span> TASKLETS_CLEANUP_MODULE(<span class="keywordtype">void</span>);
00087 
00088 <span class="keyword">struct </span>rt_tasklet_struct *<a class="code" href="group__tasklets.html#a9">rt_init_tasklet</a>(<span class="keywordtype">void</span>);
00089 
00090 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#a10">rt_delete_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00091 
00092 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#a19">rt_insert_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00093                       <span class="keywordtype">int</span> priority,
00094                       <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00095                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00096                       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id,
00097                       <span class="keywordtype">int</span> pid);
00098 
00099 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#a21">rt_remove_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00100 
00101 <span class="keyword">struct </span>rt_tasklet_struct *<a class="code" href="group__tasklets.html#a25">rt_find_tasklet_by_id</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id);
00102 
00103 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#a22">rt_exec_tasklet</a>(<span class="keyword">struct</span> rt_tasklet_struct *tasklet);
00104 
00105 <span class="keywordtype">void</span> rt_set_tasklet_priority(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00106                              <span class="keywordtype">int</span> priority);
00107 
00108 <span class="keywordtype">int</span> rt_set_tasklet_handler(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00109                            <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>));
00110 
00111 <span class="preprocessor">#define rt_fast_set_tasklet_handler(t, h) do { (t)-&gt;handler = (h); } while (0)</span>
00112 <span class="preprocessor"></span>
00113 <span class="keywordtype">void</span> rt_set_tasklet_data(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00114                          <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data);
00115 
00116 <span class="preprocessor">#define rt_fast_set_tasklet_data(t, d) \</span>
00117 <span class="preprocessor">do { \</span>
00118 <span class="preprocessor">   (t)-&gt;data = (d); \</span>
00119 <span class="preprocessor">} while (0)</span>
00120 <span class="preprocessor"></span>
00143 <span class="keyword">struct </span>rt_task_struct *rt_tasklet_use_fpu(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00144                                           <span class="keywordtype">int</span> use_fpu);
00145 
00162 <span class="preprocessor">#define rt_init_timer rt_init_tasklet </span>
00163 <span class="preprocessor"></span>
00180 <span class="preprocessor">#define rt_delete_timer rt_delete_tasklet</span>
00181 <span class="preprocessor"></span>
00182 <span class="keywordtype">int</span> <a class="code" href="group__tasklets.html#a11">rt_insert_timer</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00183                     <span class="keywordtype">int</span> priority,
00184                     RTIME firing_time,
00185                     RTIME period,
00186                     <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00187                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00188                     <span class="keywordtype">int</span> pid);
00189 
00190 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#a12">rt_remove_timer</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer);
00191 
00192 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#a13">rt_set_timer_priority</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00193                            <span class="keywordtype">int</span> priority);
00194 
00195 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#a14">rt_set_timer_firing_time</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00196                               RTIME firing_time);
00197 
00198 <span class="keywordtype">void</span> <a class="code" href="group__tasklets.html#a15">rt_set_timer_period</a>(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00199                          RTIME period);
00200 
00201 <span class="preprocessor">#define rt_fast_set_timer_period(t, p) \</span>
00202 <span class="preprocessor">do { \</span>
00203 <span class="preprocessor">   (t)-&gt;period = (p); \</span>
00204 <span class="preprocessor">} while (0)</span>
00205 <span class="preprocessor"></span>
00229 <span class="preprocessor">#define rt_set_timer_handler rt_set_tasklet_handler</span>
00230 <span class="preprocessor"></span>
00231 <span class="preprocessor">#define rt_fast_set_timer_handler(t, h) do { (t)-&gt;handler = (h); } while (0)</span>
00232 <span class="preprocessor"></span>
00255 <span class="preprocessor">#define rt_set_timer_data rt_set_tasklet_data</span>
00256 <span class="preprocessor"></span>
00257 <span class="preprocessor">#define rt_fast_set_timer_data(t, d) do { (t)-&gt;data = (d); } while (0)</span>
00258 <span class="preprocessor"></span>
00259 <span class="preprocessor">#define rt_timer_use_fpu rt_tasklet_use_fpu</span>
00260 <span class="preprocessor"></span>
00261 <span class="keywordtype">void</span> rt_wait_tasklet_is_hard(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00262                              <span class="keywordtype">int</span> thread);
00263 
00264 <span class="keywordtype">void</span> rt_register_task(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00265                       <span class="keyword">struct</span> rt_tasklet_struct *usptasklet,
00266                       <span class="keyword">struct</span> rt_task_struct *task);
00267  
00268 <span class="preprocessor">#ifdef __cplusplus</span>
00269 <span class="preprocessor"></span>}
00270 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00271 
00272 <span class="preprocessor">#else </span><span class="comment">/* !__KERNEL__ */</span>
00273 
00274 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00275 <span class="preprocessor">#include &lt;sys/mman.h&gt;</span>
00276 <span class="preprocessor">#include &lt;stdarg.h&gt;</span>
00277 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
00278 <span class="preprocessor">#include &lt;<a class="code" href="rtai__lxrt_8h.html">rtai_lxrt.h</a>&gt;</span>
00279 
00280 <span class="preprocessor">#ifndef __SUPPORT_TASKLET__</span>
00281 <span class="preprocessor"></span><span class="preprocessor">#define __SUPPORT_TASKLET__</span>
00282 <span class="preprocessor"></span>
00283 <span class="keyword">static</span> <span class="keywordtype">void</span> *support_tasklet(<span class="keywordtype">void</span> *arg)
00284 {
00285         RT_TASK *task;
00286         <span class="keyword">struct </span>rt_tasklet_struct *tasklet, usptasklet;
00287         <span class="keyword">struct </span>{ <span class="keywordtype">void</span> *tasklet; <span class="keywordtype">void</span> *handler; } upd;
00288 
00289         upd.tasklet = tasklet = ((<span class="keyword">struct </span>rt_tasklet_struct **)arg)[0];
00290         pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);
00291         <span class="keywordflow">if</span> (!(task = rt_task_init_schmod((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)tasklet, 98, 0, 0, SCHED_FIFO, 0xF))) {
00292                 printf(<span class="stringliteral">"CANNOT INIT SUPPORT TASKLET\n"</span>);
00293                 <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)1;
00294         }
00295 
00296         {
00297                 <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet, *usptasklet; RT_TASK *task; } arg = { tasklet, &amp;usptasklet, task };
00298                 rtai_lxrt(TSKIDX, SIZARG, REG_TASK, &amp;arg);
00299         }
00300 
00301         mlockall(MCL_CURRENT | MCL_FUTURE);
00302 
00303         <a class="code" href="group__lxrt.html#a58">rt_make_hard_real_time</a>();
00304         <span class="keywordflow">while</span> (1) {
00305                 <a class="code" href="common_8c.html#a10">rt_task_suspend</a>(task);
00306                 <span class="keywordflow">if</span> ((upd.handler = (<span class="keywordtype">void</span>*)usptasklet.handler)) {
00307                         rtai_lxrt(TSKIDX, SIZARG, SET_HDL, &amp;upd);
00308                         usptasklet.handler(usptasklet.data);
00309                 } <span class="keywordflow">else</span> {
00310                         <span class="keywordflow">break</span>;
00311                 }
00312         }
00313         <a class="code" href="group__lxrt.html#a7">rt_make_soft_real_time</a>();
00314 
00315         <a class="code" href="sched__up_8c.html#a62">rt_task_delete</a>(task);
00316         <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)0;
00317 }
00318 <span class="preprocessor">#endif </span><span class="comment">/* __SUPPORT_TASKLET__ */</span>
00319 
00320 <span class="preprocessor">#ifdef __cplusplus</span>
00321 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00322 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00323 
<a name="l00324"></a><a class="code" href="group__tasklets.html#a9">00324</a> RTAI_PROTO(<span class="keyword">struct</span> rt_tasklet_struct *, rt_init_tasklet,(<span class="keywordtype">void</span>))
00325 {
00326         pthread_t thread;
00327         <span class="keyword">struct </span>rt_tasklet_struct *tasklet;
00328 
00329         {
00330                 <span class="keyword">struct </span>{ <span class="keywordtype">int</span> dummy; } arg = { 0 };
00331                 tasklet = (<span class="keyword">struct </span>rt_tasklet_struct*)rtai_lxrt(TSKIDX, SIZARG, INIT, &amp;arg).v[LOW];
00332         }
00333 
00334         pthread_create(&amp;thread, NULL, support_tasklet, &amp;tasklet);
00335 
00336         {
00337                 <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; pthread_t thread; } arg = { tasklet, thread };
00338                 rtai_lxrt(TSKIDX, SIZARG, WAIT_IS_HARD, &amp;arg);
00339         }
00340 
00341         <span class="keywordflow">return</span> tasklet;
00342 }
00343 
00344 <span class="preprocessor">#define rt_init_timer rt_init_tasklet</span>
00345 <span class="preprocessor"></span>
<a name="l00346"></a><a class="code" href="group__tasklets.html#a10">00346</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_delete_tasklet,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00347 {
00348         pthread_t thread;
00349         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00350         <span class="keywordflow">if</span> ((thread = (pthread_t)rtai_lxrt(TSKIDX, SIZARG, DELETE, &amp;arg).i[LOW])) {
00351                 pthread_join(thread, NULL);
00352         }
00353 }
00354 
00355 <span class="preprocessor">#define rt_delete_timer rt_delete_tasklet</span>
00356 <span class="preprocessor"></span>
00357 RTAI_PROTO(<span class="keywordtype">int</span>, rt_insert_timer,(<span class="keyword">struct</span> rt_tasklet_struct *timer,
00358                                  <span class="keywordtype">int</span> priority,
00359                                  RTIME firing_time,
00360                                  RTIME period,
00361                                  <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00362                                  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
<a name="l00363"></a><a class="code" href="group__tasklets.html#a11">00363</a>                                  <span class="keywordtype">int</span> pid))
00364 {
00365         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; <span class="keywordtype">int</span> priority; RTIME firing_time;
00366             RTIME period; void (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>); <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; <span class="keywordtype">int</span> pid; } arg =
00367                 { timer, priority, firing_time, period, handler, data, pid };
00368         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, TIMER_INSERT, &amp;arg).i[LOW];
00369 }
00370 
<a name="l00371"></a><a class="code" href="group__tasklets.html#a12">00371</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_remove_timer,(<span class="keyword">struct</span> rt_tasklet_struct *timer))
00372 {
00373         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; } arg = { timer };
00374         rtai_lxrt(TSKIDX, SIZARG, TIMER_REMOVE, &amp;arg);
00375 }
00376 
<a name="l00377"></a><a class="code" href="group__tasklets.html#a13">00377</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_timer_priority,(<span class="keyword">struct</span> rt_tasklet_struct *timer, <span class="keywordtype">int</span> priority))
00378 {
00379         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; <span class="keywordtype">int</span> priority; } arg = { timer, priority };
00380         rtai_lxrt(TSKIDX, SIZARG, SET_TASKLETS_PRI, &amp;arg);
00381 }
00382 
<a name="l00383"></a><a class="code" href="group__tasklets.html#a14">00383</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_timer_firing_time,(<span class="keyword">struct</span> rt_tasklet_struct *timer, RTIME firing_time))
00384 {
00385         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; RTIME firing_time; } arg = { timer, firing_time };
00386         rtai_lxrt(TSKIDX, SIZARG, SET_FIR_TIM, &amp;arg);
00387 }
00388 
<a name="l00389"></a><a class="code" href="group__tasklets.html#a15">00389</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_timer_period,(<span class="keyword">struct</span> rt_tasklet_struct *timer, RTIME period))
00390 {
00391         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *timer; RTIME period; } arg = { timer, period };
00392         rtai_lxrt(TSKIDX, SIZARG, SET_PER, &amp;arg);
00393 }
00394 
00395 RTAI_PROTO(<span class="keywordtype">int</span>, rt_set_tasklet_handler,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)))
00396 {
00397         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; void (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>); } arg = { tasklet, handler };
00398         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, SET_HDL, &amp;arg).i[LOW];
00399 }
00400 
00401 <span class="preprocessor">#define rt_set_timer_handler rt_set_tasklet_handler</span>
00402 <span class="preprocessor"></span>
00403 RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_tasklet_data,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data))
00404 {
00405         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; } arg = { tasklet, data };
00406         rtai_lxrt(TSKIDX, SIZARG, SET_DAT, &amp;arg);
00407 }
00408 
00409 <span class="preprocessor">#define rt_set_timer_data rt_set_tasklet_data</span>
00410 <span class="preprocessor"></span>
00411 RTAI_PROTO(RT_TASK *, rt_tasklet_use_fpu,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">int</span> use_fpu))
00412 {
00413         RT_TASK *task;
00414         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> use_fpu; } arg = { tasklet, use_fpu };
00415         <span class="keywordflow">if</span> ((task = (RT_TASK*)rtai_lxrt(TSKIDX, SIZARG, USE_FPU, &amp;arg).v[LOW])) {
00416                 <a class="code" href="common_8c.html#a14">rt_task_use_fpu</a>(task, use_fpu);
00417         }
00418         <span class="keywordflow">return</span> task;
00419 }
00420 
00421 <span class="preprocessor">#define rt_timer_use_fpu rt_tasklet_use_fpu</span>
00422 <span class="preprocessor"></span>
00423 RTAI_PROTO(<span class="keywordtype">int</span>, rt_insert_tasklet,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet,
00424                                    <span class="keywordtype">int</span> priority,
00425                                    <span class="keywordtype">void</span> (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>),
00426                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data,
00427                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id,
<a name="l00428"></a><a class="code" href="group__tasklets.html#a19">00428</a>                                    <span class="keywordtype">int</span> pid))
00429 {
00430         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> priority; void (*handler)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);
00431             <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> data; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> id; <span class="keywordtype">int</span> pid; } arg = { tasklet, priority, handler, data, id, pid };
00432         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, TASK_INSERT, &amp;arg).i[LOW];
00433 }
00434 
00435 RTAI_PROTO(<span class="keywordtype">void</span>, rt_set_tasklet_priority,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet, <span class="keywordtype">int</span> priority))
00436 {
00437         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; <span class="keywordtype">int</span> priority; } arg = { tasklet, priority };
00438         rtai_lxrt(TSKIDX, SIZARG, SET_TSK_PRI, &amp;arg);
00439 }
00440 
<a name="l00441"></a><a class="code" href="group__tasklets.html#a21">00441</a> RTAI_PROTO(<span class="keywordtype">void</span>, rt_remove_tasklet,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00442 {
00443         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00444         rtai_lxrt(TSKIDX, SIZARG, TASK_REMOVE, &amp;arg);
00445 }
00446 
<a name="l00447"></a><a class="code" href="group__tasklets.html#a22">00447</a> RTAI_PROTO(<span class="keywordtype">int</span>, rt_exec_tasklet,(<span class="keyword">struct</span> rt_tasklet_struct *tasklet))
00448 {
00449         <span class="keyword">struct </span>{ <span class="keyword">struct </span>rt_tasklet_struct *tasklet; } arg = { tasklet };
00450         <span class="keywordflow">return</span> rtai_lxrt(TSKIDX, SIZARG, EXEC_TASKLET, &amp;arg).i[LOW];
00451 }
00452 
00453 <span class="preprocessor">#ifdef __cplusplus</span>
00454 <span class="preprocessor"></span>}
00455 <span class="preprocessor">#endif </span><span class="comment">/* __cplusplus */</span>
00456 
00457 <span class="preprocessor">#endif </span><span class="comment">/* __KERNEL__ */</span>
00458 
00461 <span class="preprocessor">#endif </span><span class="comment">/* !_RTAI_TASKLETS_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Jul 24 19:31:26 2004 for RTAI API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
