1. Code removals
----------------

o CONFIG_RTAI_RTF_NAMED has been removed and forced to YES.

o lxrt/C++ has been discontinued along with __CPP_KERNEL__ definition.

o HARD_LXRT has been removed and forced to YES.

o _NO_US_MEMORY has been removed and forced to NO.

o unused asm-i386/rtai_fpu.h has been discarded.

o OLD_FPU_SUPPORT has been removed and forced to NO.

o CONFIG_RTAI_STRANGE_APIC has been removed and forced to YES
(conservative setting).

o MOUNT_ON_LOAD has been removed and forced to YES for x86.

o Killed rtai_asm_wrapper.[ch] in C++ support since RTAI headers are
now C++ friendly.

o rtai_declare.h has been removed (see compiler.txt/LXRT inlining).

o Killed INTERFACE_TO_LINUX macro.

2. Code changes
---------------

o RTAI_MAJOR became RTAI_FIFOS_MAJOR.

o spdrv/ became rtai-addons/serial. rtcom/ support has been
discontinued.

o DECLARE (from former rtai_declare.h) became __RTAI_INLINE__ (see
compiler.txt/LXRT inlining).

o up_task_sw.S files have been moved from include/asm-* to the
corresponding hal dirs since we almost always load a sched and the
related code is tiny. up_task_sw symbols may still need to be exported
from the rtai_hals for the sched module to use them.

o semaphore & message support have been modularized. Kernel and LXRT
scheds can still optionally built them in depending on a configuration
setup, or leave them outside as independent modules. The same goes for
all ipcs, math, watchdog, trace, tasklets and usi supports.

o Prefix watchdog policies with WD_ to solve namespace clash with
RTAI's scheduler (e.g. SUSPEND => WD_SUSPEND).

o rtai_sched.h and rtai_lxrt.h have been slimmed to only declare the
scheduling support. Other declarations (SEM, MBX, SPL, RWL and MSG)
have been moved to per-feature header files (i.e. rtai_sem.h,
rtai_spl.h and so on).

o rt_mem_mgr has been renamed malloc, so that we can provide an
additional heap manager O(1)-complex.

3. Code add-ons
---------------

o set_rt_fun_ext_index() and friends now have dummy versions in
kernel-only scheds so that TBX, FIFOS and others with integrated LXRT
support can load without rtai_lxrt insmoded. See
rtai-core/sched/kern/registry.c.

4. TODO
-------

o Prefix all modules parameter names by the defining module name to
prevent name clashes when the module is built in the scheduler.

o Prefix RTAI tasks state names to prevent further namespace clashes,
i.e. SUSPEND is far too generic to be used "as is".

--
May 23, 2003
Philippe Gerum
<rpm@xenomai.org>
